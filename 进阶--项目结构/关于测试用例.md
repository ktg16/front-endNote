## jest
进行测试用例的插件
-   安装依赖

```javascript
npm i jest -D
复制代码
```

-   添加jest.config.js配置文件

```javascript
npx jest --init
复制代码
```

然后根据选择提示进行如下选择

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c26934783a594b02a622f96fa78ffb03~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?)

执行完成后，在根目录下生成了jest.config.js文件。 以及重写了`package.json`中的`scripts`

```javascript
"test": "jest",

// 之前是
father test
复制代码
```

现在可以执行一下命令`npm run test`,发现报错了，如下图所示

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6af29ee8fc6348f79ed39f8e6f02606b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?)

这里主要是因为我没有配置`babel`进行转换，可以通过如下命令进行安装并配置

```javascript
npm i babel-jest @babel/core @babel/preset-env -D
复制代码
```

安装完毕后，在根目录配置好`babel.config.js`

```javascript
 // babel.config.js
 module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: {
          node: 'current',  //针对当前node版本进行编译，删除该行可能导致`npm start`报错
        },
      },
    ],
  ],
};
复制代码
```

配置完毕后，再次运行命令`npm run test`,执行成功

将assert改为jest的方法

```javascript
// import assert from 'assert';
import omit from '../src';

describe('omit', () => {
  it('should create a shallow copy', () => {
    const benjy = { name: 'Benjy' };
    const copy = omit(benjy, []);
    expect(copy).toEqual(benjy)
  });

  it('should drop fields which are passed in', () => {
    const benjy = { name: 'Benjy', age: 18 };
    const target1 = omit(benjy, ['age'])
    const target2 = omit(benjy, ['age', 'name'])
    expect(target1).toEqual({ name: "Benjy"})

    expect(target2).toEqual({})
  });
});

复制代码
```

主要就是将原来的`assert`改为了`jest`。

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2cf89a4cc50748b58f93e2f00a202d6b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?)

2.3、新增一个方法 在src/index.js添加一个求和方法

```javascript
export const sum = (x, y) => {
  return x + y;
}
复制代码
```

然后在测试用例文件中添加单元测试

```javascript
import omit, { sum } from '../src';

describe('sum', () => {
  it('两数字之和', () => {
    expect(sum(3,4)).toEqual(7)
  })
})
复制代码
```

最后通过命令检测单元测试`npm run test`

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e686c227e85a47be8f2cd6033665ee37~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?)

通过修改jest.config.js,还可以查看到单元测试覆盖率，看一下效果

```javascript
  collectCoverage: true,
  coverageDirectory: "coverage",
复制代码
```

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6926377c928e4d57baf9a45a238846e2~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?)

同时也会生成一个文件`coverage`

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/293db75b58aa4ae8b26b331d39ba94c4~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?)

  
作者：那个曾经的少年回来了  
链接：https://juejin.cn/post/7119702439355220004  
来源：稀土掘金  
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

## assert